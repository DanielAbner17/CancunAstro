---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';

const CATEGORY_COLORS = {
  Restaurantes: 'bg-red-500',
  Ropa: 'bg-blue-500',
  Electronicos: 'bg-green-500',
  Salud: 'bg-yellow-500',
  Entretenimiento: 'bg-purple-500',
  Otros: 'bg-gray-500',
};

interface Props {
  imagePath: string;
  title: string;
  categoria:
    | 'Restaurantes'
    | 'Ropa'
    | 'Electronicos'
    | 'Salud'
    | 'Entretenimiento'
    | 'Otros';
  horario: string;
}

const { imagePath, title, categoria, horario } = Astro.props;
const categoryColor = CATEGORY_COLORS[categoria] || 'bg-gray-500';
const relativePath = '/src/images/stores/' + imagePath;

const images = import.meta.glob<{ default: ImageMetadata }>(
  '/src/images/stores/*.{jpeg,jpg,png,gif}'
);

/* 
  example of `images` object:

  const images = {
    '/src/images/stores/logo_McDonalds.png': () => import('./src/images/stores/logo_McDonalds.png'),
  }
*/

if (!images[relativePath])
  throw new Error(
    `"${relativePath}" does not exist in glob: "/src/images/stores/*.{jpeg,jpg,png,gif}"`
  );
---

<div
  class='group bg-white outline outline-1 outline-gray-200 aspect-square flex flex-col items-center relative justify-center p-8'
>
  <Image
    class='grayscale transition group-hover:grayscale-0'
    src={images[relativePath]()}
    alt={`${title}-logo`}
    width={200}
    height={150}
  />
  <div class='absolute inset-0 flex flex-col justify-between items-start'>
    <span
      class:list={[categoryColor]}
      class='py-2 px-4 mt-4 ml-auto text-sm font-semibold rounded-s-md text-white'
    >
      {categoria}
    </span>
    <p
      class=`py-2 px-4 mb-4 mr-4 text-sm text-white opacity-0 transition-all font-semibold rounded-e-md
      group-hover:opacity-100 ${categoryColor}`
      set:html={horario}
    >
      {
        /* El contenido de `horario` se insertará aquí, interpretando HTML si lo contiene */
      }
    </p>
  </div>
</div>
