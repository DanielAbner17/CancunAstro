---
import Layout from 'src/layouts/Layout.astro';
import GaleriaDirectorio from '@components/sections/GaleriaDirectorio';
import PageHero from '@components/common/PageHero.astro';
import { stores } from 'src/data/stores.js';

const importedImages = await Astro.glob<{ default: ImageMetadata }>(
  '/src/images/stores/*.{jpeg,jpg,png,gif,webp}'
);

const images = importedImages.map((file) => file.default);

const itemsWithImage = stores.map((item) => {
  const path = '/src/images/stores/' + item.imageName;
  const image = images.find((img) => img.src.includes(path));

  return {
    ...item,
    image,
  };
});
---

<Layout title='Directorio'>
  <PageHero title='Directorio' />
  <GaleriaDirectorio
    client:visible
    className='py-12 md:py-16 lg:py-24'
    stores={itemsWithImage}
  />
</Layout>
